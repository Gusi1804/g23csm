<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Votación Graduación</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://s.pageclip.co/v1/pageclip.css" media="screen">

    <link rel="stylesheet" href="https://use.typekit.net/wuv7lww.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"
            integrity="sha256-c9vxcXyAG4paArQG3xk6DjyW/9aHxai2ef9RpMWO44A=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.8.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.8.1/firebase-firestore-compat.js"></script>

    <!-- Charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        h1 {
            font-family: pt-serif-pro,sans-serif;
            font-weight: 600;
            font-style: normal;
        }

        h2 {
            font-family: pt-serif-pro,sans-serif;
            font-weight: 600;
            font-style: normal;
        }

        table {
            font-family: pt-serif-pro,sans-serif;
            font-weight: 400;
            font-style: normal;
        }

        div {
            font-family: pt-serif-pro,sans-serif;
            font-weight: 400;
            font-style: normal;
        }

        canvas {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
    </style>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCM3RGa8Zl59QCsKtcmhBkPK7H1JL_LeUQ",
            authDomain: "g23-csm.firebaseapp.com",
            projectId: "g23-csm",
            storageBucket: "g23-csm.appspot.com",
            messagingSenderId: "735574331856",
            appId: "1:735574331856:web:6f826790f622f2c57869d5"
        };

        // Initialize Firebase
        const firebaseApp = firebase.initializeApp(firebaseConfig);
    </script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            // https://dashboard.emailjs.com/admin/account
            emailjs.init('0lB__J0umMpoXi8LV');
        })();
    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
</head>
<body>
<div class="container-sm  py-5 text-left align-items-center justify-content-start" id="main">
    <main>
        <h1>Votación Graduación</h1>
        <h6 class="pb-4" id="date"></h6>

        <div class="alert alert-info d-flex align-items-center" role="alert">
            <i class="bi bi-info-circle pe-3"></i>
            <div>Se recomienda visualizar esta página en una computadora.</div>
        </div>

        <div class="container container-sm chart-container d-flex align-items-center" style="position: relative; height:50vh;">
            <canvas id="myChart"></canvas>
        </div>

        <!-- Opciones -->
        <hr>
        <h2>Propuestas</h2>
        <div class="alert alert-dark" role="alert">
            Por favor revisa las cuatro propuestas detenidamente antes de pasar a la votación.
        </div>
        <div class="table-responsive pb-4">
            <table class="table table-hover table-sm">
                <thead>
                <tr>
                    <th class="col-md-2"></th>
                    <th class="col-md-6">
                        <a href="https://www.haciendadelosmorales.com" target="_blank">Hacienda de Los Morales</a><br><br>
                        <img src="haciendamorales.png" height="150">
                    </th>
                    <th class="col-md-6">
                        <a href="https://www.haciendadesanfernando.com.mx" target="_blank">Hacienda de San Fernando</a><br><br>
                        <img src="sanfernando.jpeg" height="150">
                    </th>
                    <!--
                    <th class="col-md-3">
                        <a href="https://ambrosia.mx/pages/eventos.html" target="_blank">Ambrosía</a><br><br>
                        <img src="ambrosía.png" height="150">
                    </th>
                    <th class="col-md-3">
                        <a href="https://ambrosia.mx/pages/eventos.html" target="_blank">Centro Libanés Unidad Alfredo "Fredy" Atala (Av. Toluca)</a><br><br>
                        <img src="libanés.jpeg" height="150">
                    </th>
                    -->
                </tr>
                </thead>
                <tbody>
                <tr>
                    <th>Dirección</th>
                    <td><a href="https://www.google.com/maps/place/Hacienda+de+los+Morales/@19.4343448,-99.2092771,17z/data=!3m1!4b1!4m5!3m4!1s0x0:0x1b803634341b80a9!8m2!3d19.4343448!4d-99.2092771" target="_blank">Vázquez de Mella 525, Col. del Bosque, Alcaldía Miguel Hidalgo, C.P. 11510, CDMX</a></td>
                    <td><a href="https://goo.gl/maps/3DYVuW7VCAVXkjzK6" target="_blank">Avenida San Fernando 106, Col. Tlalpan, Alcaldía Tlalpan, C.P. 14000, CDMX</a></td>
                    <!--
                    <td><a href="https://goo.gl/maps/SXcA5XyHFzT5VgfR6" target="_blank">Periférico Sur 3395, Col. Jardines del Pedregal, C.P 14120, CDMX</a></td>
                    <td><a href="https://goo.gl/maps/SZ1E5ZgpiK7ZQAgx7" target="_blank">Av. Glaciar No. 500, Col. Olivar de los Padres, Alcaldía Álvaro Obregón, C.P. 01780, CDMX</a></td>
                    -->
                </tr>
                <tr>
                    <th>Votos</th>
                    <td id="morales_votos">Cargando...</td>
                    <td id="fernando_votos">Cargando...</td>
                </tr>
                <tr>
                    <th>Fecha y Horario cotizados</th>
                    <td>Viernes 9 de junio de 2023 de 21:00 – 3:00</td>
                    <td>Viernes 9 de junio de 2023 de 20:00 – 3:00</td>
                </tr>
                <tr>
                    <th># Personas consideradas al cotizar<br><small>IMPORTANTE: los precios pueden cambiar si se modifica este número</small></th>
                    <td><ul>
                        <li>Cena: 250</li>
                        <li>After: 50</li>
                    </ul></td>
                    <td><ul>
                        <li>Cena: 200, 250, 300 y 350</li>
                        <li>After: 50</li>
                    </ul></td>
                </tr>
                <tr>
                    <th>Límite(s) de Pago y montos</th>
                    <td>
                        <ul>
                            <li>Para Reservar: 30% del total ≈ $180,000.00 (lo más pronto posible)</li>
                            <li>Para Conservar Precios 2022: 70% del total EN ENERO ≈ $420,000.00</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Para Reservar: 31 boletos (lím. 2ª sem. de enero)</li>
                        </ul>
                    </td>
                    <!--
                    <td>
                        <ul>
                            <li>Para Reservar: 31 boletos (lím. 2ª sem. de enero)</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Para Reservar: 31 boletos (lím. 2ª sem. de enero)</li>
                        </ul>
                    </td>
                    -->
                </tr>
                <tr>
                    <th>Máximo de Personas</th>
                    <td>400</td>
                    <td>400</td>
                </tr>
                <tr>
                    <th>Valet Parking</th>
                    <td>SÍ, sin costo (solo propinas voluntarias)</td>
                    <td>SÍ, costo: $100.00 / vehículo</td>
                </tr>
                <tr>
                    <th>Precios ESTIMADOS / persona (2022)<br><small>El próximo año serán más altos</small></th>
                    <td><ul>
                        <li>Cena: $1,420.00</li>
                        <li>Cena con tornafiesta: $2,165.00</li>
                        <li>After (23:00 – 3:00): $725.00</li>
                        <li>After con tornafiesta (23:00 – 3:00): $1,475.00</li>
                        <small>(Si quisiéramos que los afters llegaran más temprano cuesta $181.00 por hora extra)</small>
                    </ul></td>
                    <td><b>Cena</b><ul>
                        <li>200 PX: $1,640.00</li>
                        <li>250 PX: $1,490.00</li>
                        <li>300 PX: $1,390.00</li>
                        <li>350 PX: $1,330.00</li>
                    </ul><b>After:</b> $750.00</td>
                </tr>
                <tr>
                    <th>Menú</th>
                    <td><b>Cena</b><ul>
                        <li>Crema</li>
                        <li>Filete de res al vino tinto</li>
                        <li>Postre: Pastel sacher o tarta de frutos rojos (Alternado)</li>
                        <li>Pan de Sal</li>
                        <li>Café Regular y Descafeinado</li>
                        <li>Variedad de Tés</li>
                    </ul>
                        <b>Tornafiestas</b><ul>
                            <li>Chilaquiles verdes/rojos c/pollo</li>
                            <li>Frijoles refritos</li>
                            <li>Esquites</li>
                            <li>Pan salado</li>
                            <li>Pan dulce</li>
                            <li>1 cerveza nacional</li>
                            <li>Café americano y descafeinado</li>
                        </ul></td>
                    <td>
                        En la cena se incluye un menú de 4 tiempos y tornafiestas. El menú detallado aún está por definir.
                    </td>
                </tr>
                <tr>
                    <th>Personas / mesa</th>
                    <td>10</td>
                    <td>10</td>
                </tr>
                <tr>
                    <th>Alcohol / Descorche</th>
                    <td>Precio de descorche ya incluido en los precios anteriores.<br>
                        Límite de botellas por familia: NO<br>
                        Entrega de botellas por familia: el día del evento</td>
                    <td>No se cobra descorche. Cada familia puede llegar con sus botellas el día del evento.</td>
                </tr>
                <tr>
                    <th>Música Cotizada</th>
                    <td>1 DJ de $50,000.00 por toda la duración del evento.</td>
                    <td><ul>
                        <li>DJ: Rhythm & Beat</li>
                        <li>Sax en la cena</li>
                        <li>Mariachi</li>
                    </ul></td>
                </tr>
                <tr>
                    <th>Mobiliario / Montaje / Producción</th>
                    <td>Incluyen sillas, mesas y manteles<br>
                        Incluye mesas para las personas del after
                    </td>
                    <td><ul>
                        <li>Pista de baile.</li>
                        <li>Pantalla de LED.</li>
                        <li>Iluminación con torres robóticas.</li>
                        <li>Bazuca de confeti.</li>
                        <li>Iluminación led para el recinto.</li>
                        <li>Vestuarios temáticos.</li>
                        <li>Zanqueros de led.</li>
                        <li>Cabezones.</li>
                        <li>Botarga de T-REX.</li>
                        <li>Souvenirs y proms de fiesta.</li>
                        <li>Performance "Juego del calamar o Casa de
                            papel"</li>
                        <li>Performance "Pirata del Caribe"</li>
                    </ul></td>
                </tr>
                <tr>
                    <th>Amenidades</th>
                    <td>NO</td>
                    <td><ul>
                        <li>Letras gigantes.</li>
                        <li>Brindis de graduados con vino espumoso.</li>
                        <li>Botella de vino por mesa.</li>
                        <li>Carrito de shots.</li>
                        <li>Foto panorámica de grupo por graduado.</li>
                        <li>Cabina de fotos 360.</li>
                        <li>Cabina de fotos tipo Iglú.</li>
                        <li>Mesa de dulces y snacks después de la cena.</li>
                        <li>Pantuflas para graduadas y tarros para graduados.</li>
                        <li>Photo wall.</li>
                    </ul></td>
                </tr>
                <tr>
                    <th>Planta de Electricidad de Emergencia</th>
                    <td>NO</td>
                    <td>SÍ</td>
                </tr>
                <tr>
                    <th>Restricciones COVID (por ahora)</th>
                    <td>NO</td>
                    <td>NO, en caso de cierres se puede reprogramar sin costo.</td>
                </tr>
                <tr>
                    <th>Invitaciones / pases</th>
                    <td>NO incluidos; nosotros nos tenemos que encargar de eso.</td>
                    <td>Digitales; control del proveedor</td>
                </tr>
                <tr>
                    <th>Elementos adicionales incluidos en el precio cotizado</th>
                    <td><ul>
                        <li>35 Centros de mesa de $580.00 c/u</li>
                        <li>2 edecanes / 2 horas para asignación de mesas</li>
                        <li>2 personas de seguridad para control de boletos y de personas (*ESTIMADO)</li>
                    </ul></td>
                    <td>Ver montaje y amenidades</td>
                </tr>
                <tr>
                    <th>Notas Importantes</th>
                    <td>Falta considerar en el precio mencionado:<ul>
                        <li>Pista de baile (no cotizada aún) y luces</li>
                        <li>Pago Sindicato de la Música: $4,800 / 6 hrs</li>
                        <li>Servicio de Fotógrafo</li>
                        <li>Servicio de Video</li>
                        <li><b>Elegir la Hacienda de los Morales implica un gran trabajo para el comité, ya que ellos solo proporcionan los alimentos y lo demás lo tendríamos que organizar nosotros mismos.</b></li>
                    </ul></td>
                    <td>Falta considerar en el precio mencionado:<ul>
                        <li>Servicio de Fotógrafo</li>
                        <li>Servicio de Video</li>
                    </ul>Es muy posible que llueva y que no podamos estar en las áreas exteriores.
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <br>
        <hr>

        <h2>Encuesta para votación</h2>
        <div class="alert alert-dark" role="alert">
            Ahora es momento de seleccionar tu <i>venue</i> favorito, así como de registrar el número de boletos que te comprometes a adquirir. Antes de hacer esto, <b>por favor no olvides tomar en cuenta los siguientes puntos</b>:
            <ul>
                <li>Esta encuesta se puede llenar solo 1 vez por familia. En caso de querer hacer alguna corrección comunícate directamente con el comité de graduación.</li>
                <li>Esta encuesta debe de ser llenada por los alumnos de la G23 JUNTO CON SUS PADRES/TUTORES. Esto es muy importante porque tú y tu familia estarán haciendo un compromiso de adquirir un cierto número de boletos, el cual será tomado en cuenta al firmar el contrato. Es menester que cumplas tu compromiso porque de lo contrario tendremos que pagar penalizaciones y todos nos veríamos afectados. Piensa bien a lo que te puedes comprometer antes de enviar el acuerdo.</li>
                <li>En la medida de lo posible haz la mejor estimación de la cantidad de boletos que vas a necesitar. Como te podrás haber dado cuenta, entre mayor es el número de invitados, menor es el precio por boleto. PERO NO SOBREESTIMES, recuerda que te estás comprometiendo a liquidar el 100% del costo de ese número de boletos.</li>
                <li>Estos precios están sujetos a cambios, principalmente si cambiara el número total de invitados definitivos (a comparación de los cotizados) o por los incrementos de precios del siguiente año. Toma en cuenta esto al tomar tu decisión.</li>
                <li>La opción que será seleccionada será aquella que tenga el mayor número de votos. La opción ganadora será anunciada una vez que hayan votado los 31 integrantes de la generación o que una opción haya recibido el voto de al menos 16 personas.</li>
            </ul>
        </div>

        <form action="https://send.pageclip.co/YLjebHa7H5DwiSJx5syUHtgF7CqKgR0n" class="pageclip-form" method="post" oninput="nameInput()" onsubmit="submitForm()">
            <!-- Replace these inputs with your own. Make sure they have a "name" attribute! -->
            <div class="mb-3">
                <label for="email" class="form-label">Correo electrónico (email)*</label>
                <input type="email" class="form-control" id="email" name="email" aria-describedby="emailHelp" required>
                <div id="emailHelp" class="form-text">Cuando hayamos verificado tus datos recibirás una confirmación a este correo.</div>
            </div>

            <div class="mb-3">
                <label for="name" class="form-label">Nombre completo del alumno*</label>
                <input type="text" class="form-control" id="name" name="name" aria-describedby="nameHelp" oninput="nameInput()" required>
                <div id="nameHelp" class="form-text">Formato: Nombre(s) Apellido Paterno Apellido Materno.</div>
            </div>

            <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" id="adult" name="adult" oninput="adultStatusChanged()" required checked>
                <label class="form-check-label" for="adult" id="adultLabel">
                    Soy mayor de edad al momento de firmar este acuerdo y registrar mi voto.
                </label>
            </div>

            <label for="signer2" class="form-label">¿Quién va a adquirir el compromiso de liquidar el total de boletos registrado en este formulario?*</label>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="signer" id="signer1" oninput="signerChanged()">
                <label class="form-check-label" for="signer1">
                    Yo, el alumno.
                </label>
            </div>
            <div class="form-check mb-3">
                <input class="form-check-input" type="radio" name="signer" id="signer2" checked oninput="signerChanged()">
                <label class="form-check-label" for="signer2">
                    Mi padre/madre/tutor (obligatorio en caso de menores de edad) – <b>Fuertemente Recomendado</b>
                </label>
            </div>

            <div id="minor-inputs">
                <div class="mb-3">
                    <label for="name_tutor" class="form-label">Nombre completo del padre/madre/tutor del alumno que adquirirá el compromiso de liquidar el total de boletos registrado en este formulario*</label>
                    <input type="text" class="form-control" id="name_tutor" name="name_tutor" aria-describedby="nameHelp-ad" oninput="nameInput()" required>
                    <div id="nameHelp-ad" class="form-text">Formato: Nombre(s) Apellido Paterno Apellido Materno.</div>
                </div>
            </div>

            <div class="mb-3">
                <label for="invitados_cena" class="form-label">Número de boletos a comprar para la cena (incluye after)*</label>
                <input type="number" class="form-control" id="invitados_cena" name="invitados_cena" placeholder="" required aria-describedby="cenaHelp">
                <div id="cenaHelp" class="form-text">No te incluyas a ti mismo (el alumno) en este número.</div>
            </div>
            <div class="mb-3">
                <label for="invitados_after" class="form-label">Número de boletos a comprar para acceso ÚNICAMENTE al after (no a la cena)*</label>
                <input type="number" class="form-control" id="invitados_after" name="invitados_after" placeholder="" required aria-describedby="afterHelp">
                <div id="afterHelp" class="form-text">En caso de no querer adquirir boletos de after escribe 0.</div>
            </div>
            <label for="voto" class="form-label">¿Cuál es tu <i>venue</i> preferido para realizar la graduación de la G23?*</label>
            <select class="form-select" aria-label="Venue favorito" id="voto" name="voto" aria-describedby="venueHelp">
                <option selected>Abre el menú para seleccionar tu opción favorita</option>
                <option value="Hacienda de Los Morales">Hacienda de Los Morales</option>
                <option value="Hacienda de San Fernando">Hacienda de San Fernando</option>
                <!--
                <option value="Ambrosía">Ambrosía</option>
                <option value="Centro Libanés">Centro Libanés</option>
                -->
            </select>
            <div id="venueHelp" class="form-text mb-3">Recuerda analizar profundamente todas las prestaciones y características de cada <i>venue</i>, así como tener una reunión con tus padres antes de hacer una selección.</div>
            <div class="mb-3">
                <label for="comentarios" class="form-label">En caso de ser necesario, por favor escribe abajo cualquier comentario que quieras hacer llegar al Comité de Graduación de la G23.</label>
                <textarea class="form-control" id="comentarios" rows="3" aria-describedby="commentsHelp"></textarea>
                <div id="commentsHelp" class="form-text">Campo opcional</div>
            </div>

            <input class="form-control" type="text" aria-label="statement" readonly hidden id="statement" name="statement">

            <p>Por favor revisa la siguiente declaración y marca la casilla en caso de estar de acuerdo con ésta:</p>
            <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" id="accept" name="accept" required>
                <label class="form-check-label" for="accept" id="acceptLabel">
                    Soy mayor de edad al momento de firmar este acuerdo y registrar mi voto.
                </label>
            </div>


            <div class="alert alert-info d-flex align-items-center" role="alert">
                <i class="bi bi-info-circle pe-3"></i>
                <div>Una vez enviado tu voto recibirás una confirmación a tu correo electrónico (en caso de no verla en tu bandeja de entrada revisa tu carpeta de spam).</div>
            </div>


            <!-- This button will have a loading spinner. Keep the inner span for best results. -->
            <button type="submit" class="pageclip-form__submit btn btn-primary" onclick="submitForm()">
                <span>Enviar</span>
            </button>


        </form>

       <!-- <button type="button" class="btn btn-secondary" onclick="email()">Email</button> -->
    </main>

    <script>
        var db = firebaseApp.firestore();

        document.addEventListener("DOMContentLoaded", (event) => {
            shuffle( document.querySelectorAll('#voto') )

            document.getElementById("date").innerText = `Fecha actual: ${new Date().toLocaleString()}`;

            db.collection("votos").doc("counts").get().then((doc) => {
                if (doc.exists) {
                    //console.log("Document data:", doc.data());

                    let fernando = doc.data().fernando;
                    let morales = doc.data().morales;

                    document.getElementById("fernando_votos").innerText = String(fernando);
                    document.getElementById("morales_votos").innerText = String(morales);

                    const ctx = document.getElementById('myChart');

                    new Chart(ctx, {
                        type: 'pie',
                        data: {
                            labels: ['Hacienda de Los Morales', 'Hacienda de San Fernando'],
                            datasets: [{
                                label: '# de votos',
                                data: [morales, fernando],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'top',
                                },
                                title: {
                                    display: true,
                                    text: 'Estado actual de la votación'
                                }
                            }
                        }
                    });
                } else {
                    // doc.data() will be undefined in this case
                    console.log("No such document!");
                }
            }).catch((error) => {
                console.log("Error getting document:", error);
            });
        });

        /*
        function email() {
            emailjs.send("service_tcq84v5","template_xmzfx6b",{
                to_name: document.getElementById("name").value,
                cena: document.getElementById("invitados_cena").value,
                after: document.getElementById("invitados_after").value,
                voto: document.getElementById("voto").value,
                acuerdo: document.getElementById("statement").value,
                to_email: document.getElementById("email").value,
            });
        }
         */

        function submitForm() {
            let student_signer = document.getElementById("signer1").checked;
            let adult_signer = document.getElementById("signer2").checked;

            var signer = "";
            var signer_name = ""

            if (student_signer && !adult_signer) {
                signer = "student"
                signer_name = document.getElementById("name").value;
            } else if (!student_signer && adult_signer) {
                signer = "parent"
                signer_name = document.getElementById("name_tutor").value;
            }

            emailjs.send("service_tcq84v5","template_xmzfx6b",{
                to_name: document.getElementById("name").value,
                cena: document.getElementById("invitados_cena").value,
                after: document.getElementById("invitados_after").value,
                voto: document.getElementById("voto").value,
                acuerdo: document.getElementById("statement").value,
                to_email: document.getElementById("email").value,
                mensaje: document.getElementById("comentarios").value,
                signer_name: signer_name,
                fecha: new Date().toLocaleString()
            });

            // Add a new document with a generated id.
            db.collection("votos").add({
                email: document.getElementById("email").value,
                name: document.getElementById("name").value,
                adult: document.getElementById("adult").checked,
                signer: signer,
                name_tutor: document.getElementById("name_tutor").value,
                invitados_cena: Number(document.getElementById("invitados_cena").value),
                invitados_after: Number(document.getElementById("invitados_after").value),
                voto: document.getElementById("voto").value,
                comentarios: document.getElementById("comentarios").value,
                accept: document.getElementById("accept").checked,
                statement: document.getElementById("statement").value,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            })
                .then((docRef) => {
                    switch (document.getElementById("voto").value) {
                        case "Hacienda de Los Morales":
                            db.collection('votos').doc('counts').update({
                                morales: firebase.firestore.FieldValue.increment(1)
                            });
                            break;
                        case "Hacienda de San Fernando":
                            db.collection('votos').doc('counts').update({
                                fernando: firebase.firestore.FieldValue.increment(1)
                            });
                            break;
                    }
                })
                .catch((error) => {
                    console.error("Error adding document: ", error);
                });

            document.getElementById("date").innerText = `Fecha actual: ${new Date().toLocaleString()}`
            //window.print();
        }

        function nameInput() {
            //document.getElementById("adultLabel").innerText = `Yo, ${document.getElementById("name").value}, soy mayor de edad.`
            let student_signer = document.getElementById("signer1").checked;
            let adult_signer = document.getElementById("signer2").checked;

            if (student_signer) {
                document.getElementById("acceptLabel").innerHTML = `Yo, ${document.getElementById("name").value}, soy mayor de edad y bajo completa libertad me comprometo a adquirir ${document.getElementById("invitados_cena").value} boletos para la cena de la graduación de la Generación 2023 del Colegio Suizo de México Campus CDMX en la fecha tentativa establecida en la tabla de información, así como ${document.getElementById("invitados_after").value} boletos para el <i>after</i> de ese evento. El <i>venue</i> que seleccioné junto con mi familia es ${document.getElementById("voto").value}.`
                document.getElementById("statement").value = `Yo, ${document.getElementById("name").value}, soy mayor de edad y bajo completa libertad me comprometo a adquirir ${document.getElementById("invitados_cena").value} boletos para la cena de la graduación de la Generación 2023 del Colegio Suizo de México Campus CDMX en la fecha tentativa establecida en la tabla de información, así como ${document.getElementById("invitados_after").value} boletos para el after de ese evento. El venue que seleccioné junto con mi familia es ${document.getElementById("voto").value}.`
            } else if (adult_signer) {
                document.getElementById("acceptLabel").innerHTML = `Yo, ${document.getElementById("name_tutor").value}, padre/madre/tutor(a) de ${document.getElementById("name").value}, bajo completa libertad me comprometo a adquirir ${document.getElementById("invitados_cena").value} boletos para la cena de la graduación de la Generación 2023 del Colegio Suizo de México Campus CDMX en la fecha tentativa establecida en la tabla de información, así como ${document.getElementById("invitados_after").value} boletos para el <i>after</i> de ese evento. El <i>venue</i> que seleccioné junto con mi hijo/a es ${document.getElementById("voto").value}.`
                document.getElementById("statement").value = `Yo, ${document.getElementById("name_tutor").value}, padre/madre/tutor(a) de ${document.getElementById("name").value}, bajo completa libertad me comprometo a adquirir ${document.getElementById("invitados_cena").value} boletos para la cena de la graduación de la Generación 2023 del Colegio Suizo de México Campus CDMX en la fecha tentativa establecida en la tabla de información, así como ${document.getElementById("invitados_after").value} boletos para el after de ese evento. El venue que seleccioné junto con mi hijo/a es ${document.getElementById("voto").value}.`
            }
        }

        function adultStatusChanged() {
            let adult = document.getElementById("flexCheckIndeterminate").checked;
            let student_signer = document.getElementById("signer1").checked;
            let adult_signer = document.getElementById("signer2").checked;

            if (!adult) {
                document.getElementById("signer1").disabled = true;
                document.getElementById("signer2").checked = true;

                document.getElementById("minor-inputs").innerHTML = `<div class="mb-3">
                <label for="name-tutor" class="form-label">Nombre completo del padre/madre/tutor del alumno que adquirirá el compromiso de liquidar el total de boletos registrado en este formulario*</label>
                <input type="text" class="form-control" id="name-tutor" name="name-tutor" aria-describedby="nameHelp-ad" oninput="nameInput()" required>
                <div id="nameHelp-ad" class="form-text">Formato: Nombre(s) Apellido Paterno Apellido Materno.</div>
            </div>`
            } else {
                document.getElementById("signer1").disabled = false;
                if (adult_signer) {
                    document.getElementById("minor-inputs").innerHTML = `<div class="mb-3">
                <label for="name-tutor" class="form-label">Nombre completo del padre/madre/tutor del alumno que adquirirá el compromiso de liquidar el total de boletos registrado en este formulario*</label>
                <input type="text" class="form-control" id="name-tutor" name="name-tutor" aria-describedby="nameHelp-ad" oninput="nameInput()" required>
                <div id="nameHelp-ad" class="form-text">Formato: Nombre(s) Apellido Paterno Apellido Materno.</div>`
                } else if (student_signer && adult) {
                    document.getElementById("minor-inputs").innerHTML = "";
                }
            }
        }

        function signerChanged() {
            let student_signer = document.getElementById("signer1").checked;
            let adult_signer = document.getElementById("signer2").checked;
            let adult = document.getElementById("flexCheckIndeterminate").checked;

            if (adult_signer) {
                document.getElementById("minor-inputs").innerHTML = `<div class="mb-3">
                <label for="name-tutor" class="form-label">Nombre completo del padre/madre/tutor del alumno que adquirirá el compromiso de liquidar el total de boletos registrado en este formulario*</label>
                <input type="text" class="form-control" id="name-tutor" name="name-tutor" aria-describedby="nameHelp-ad" oninput="nameInput()" required>
                <div id="nameHelp-ad" class="form-text">Formato: Nombre(s) Apellido Paterno Apellido Materno.</div>`
            } else if (student_signer && adult) {
                document.getElementById("minor-inputs").innerHTML = "";
            }
        }

        function shuffle(elems) {

        }
    </script>
</div>

<script src="https://s.pageclip.co/v1/pageclip.js" charset="utf-8"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</body>
</html>